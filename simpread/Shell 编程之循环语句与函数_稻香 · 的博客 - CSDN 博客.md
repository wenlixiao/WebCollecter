> 本文由 [简悦 SimpRead](http://ksria.com/simpread/) 转码， 原文地址 [blog.csdn.net](https://blog.csdn.net/weixin_67479400/article/details/124829085)

**目录**

[一. 循环语句](#t0)

[1. for 循环语句](#t1)

[1.1  示例](#t2)

[2. while 语句](#t3)

[2.1 示例](#t4)

[3. until 语句](#t5)

[3.1  示例](#t6)

[二. Shell 函数](#t7)

[1. 函数基本格式](#t8)

[2. 函数注意事项](#t9)

[3. 函数返回值](#t10)

[3.1 函数的使用原则](#t11)

[4. 应用示例](#t12)

[4.1 简单函数调用](#t13)

[4.2 调用函数安装本地 yum 源](#t14)

[5. 涵数的作用范围](#t15)

[6. 函数的参数](#t16)

[6.1 传参计算两个数的和](#t17)

[6.2 调用函数删除文件](#t18)

[7. 递归函数](#t19)

[7.1 递归遍历目录](#t20)

[7.2 计算特定数的阶乘](#t21)

[7.3 计算随机数的阶乘](#t22)

[三. Shell 数组](#t23)

[1. 定义数组](#t24)

[2. 获取数组长度](#t25)

[3. 元素切片](#t26)

[4. 元素替换](#t27)

[5. 元素删除](#t28)

[6. 冒泡排序](#t29)

[6.1 数组排序算法](#t30)

[6.2 基本思想](#t31)

[6.3 算法思路](#t32)

一. [循环语句](https://so.csdn.net/so/search?q=%E5%BE%AA%E7%8E%AF%E8%AF%AD%E5%8F%A5&spm=1001.2101.3001.7020)
=======================================================================================================

1. for 循环语句
-----------

使用 for 循环语句时，需要指定一个变量及可能的取值列表，针对每一个不同的取值重复执行相同的命令序列，直到变量值用完退出循环。

**语法结构：**

```
for 变量名 in 取值列表
do
	命令序列
done
```

**语法执行流程：**

首先将列表中的第 1 个取值赋给变量，并执行 do···done 循环体中的命令序列

然后将列表中的第 2 个取值赋给变量，并执行循环体中的命令序列……

以此类推，直到列表中的所有取值用完，最后将跳至 done 语句，表示结束循环

![](https://img-blog.csdnimg.cn/398b2dbfe7c44e9f8b3b25208059af75.png)

![](https://img-blog.csdnimg.cn/29e767ca7ed84db1885ce8e5324b5eaa.png)

### 1.1  示例

**1. 示例：计算整数和**

随机输入一个小于 50 的整数，并计算从 1 到该数之间所有整数的和

![](https://img-blog.csdnimg.cn/d5c17db1498340b18ee78f4a4dcb7ee4.png)

![](https://img-blog.csdnimg.cn/2e4ccc1bde194d7c86d8a42c015dc92d.png)

**2. 示例：列出奇数偶数**

![](https://img-blog.csdnimg.cn/2a55768012be4833828b5f9dc5233b87.png)

 ![](https://img-blog.csdnimg.cn/9de185bdc7ff455f891756ec2de2621a.png)

**示例 3：根据 IP 地址列表检查主机状态**

![](https://img-blog.csdnimg.cn/720f5cdc912e477ebff3da6b39ff2fed.png)

 ![](https://img-blog.csdnimg.cn/936bc2f81a62499b8af8d19205aed170.png)

 ![](https://img-blog.csdnimg.cn/df98123b05864ddb9389dc651333d8ce.png)

2. while 语句
-----------

for 循环语句非常适用于列表对象无规律，且列表来源已固定（如某个列表文件）的场合。而对于要求控制循环次数、操作对象按数字顺序编号、按特定条件执行重复操作等情况，则更适合使用另一种循环—while 语句。

使用 while 循环语句时, 可以根据特定的条件反复执行一个命令序列，直到该条件不再满足时为止。但是在脚本应用中，应该避免出现死循环的情况，否则后边的命令操作将无法执行。

循环体内的命令序列中应包括修改测试条件的语句，以便在适当的时候使测试条件不再成立，从而结束循环。

**语法结构：**

```
while 条件测试操作
do
	命令序列
done
```

**语法执行流程：**

首先判断 while 后的条件测试操作结果，如果条件成立，则执行 do···done 循环体中的命令序列

返回 while 后再次判断条件测试结果，如果条件仍然成立，则继续执行循环体

再次返回到 while 后, 判断条件测试结果… 如此循环

直到 while 后的条件测试结果不再成立为止，最后跳转到 done 语句，表示结束循环

### 2.1 示例

**示例 1：创建用户**![](https://img-blog.csdnimg.cn/07423a9c12404df8b4dd385b2984f6eb.png)

**示例 2：商场购物**![](https://img-blog.csdnimg.cn/be4c53071d0a4a259626df56c1bc6ba8.png)

 ![](https://img-blog.csdnimg.cn/736db70001104c1c80bb6d56113a7986.png)

**示例 3：猜数字**

![](https://img-blog.csdnimg.cn/06dc8bf194ee447abf27806b4295b2df.png)

![](https://img-blog.csdnimg.cn/595f0e0e2a5a4fd4a2dd04cec96ed90e.png)

3. until 语句
-----------

重复测试某个条件，只要条件不成立则反复执行

**语法结构：**

```
until 条件测试操作
do
   命令序列
done
```

### 3.1  示例

**示例 1：计算 1~50 的和值**

![](https://img-blog.csdnimg.cn/48392b00d44046ada90f1c9215f245fe.png)

二. Shell 函数
===========

*   **将命令序列按格式写在一起**
*   **可方便重复使用命令序列**

1. 函数基本格式
---------

```
方法一：
[function] 函数名 (){
	命令序列
	[return x]         #使用return或者exit可以显式的结束函数
}
 
方法二：
函数名(){
	命令序列
}
```

**2. 函数注意事项**
-------------

*   直接写函数中调用
    
*   函数直接写函数名同名函数后一个生效
    
*   调用函数一定要先定义
    
*   只要先定义了调用的其他函数定义顺序无关
    

3. 函数返回值
--------

**return 表示退出函数并返回一个退出值，脚本中可以用 $? 变量表示该值**

### 3.1 函数的使用原则

*   函数一结束就取返回值，因为 $? 变量只返回执行的最后一条命令的退出状态码
*   退出状态码必须是 0~255，超出时值将为除以 256 取余

![](https://img-blog.csdnimg.cn/b9d5570125074a708b23c5877af3df39.png)

4. 应用示例
-------

### 4.1 简单函数调用

![](https://img-blog.csdnimg.cn/a4cc64e893ab49ee8be4f57e85aa1503.png)

### 4.2 调用函数安装本地 yum 源 

![](https://img-blog.csdnimg.cn/a7b6f05d111e4bf397c27270fa817b4a.png)

5. 涵数的作用范围
----------

*   函数在 Shell 脚本中仅在当前 Shell 环境中有效
*   Shell 脚本中变量默认全局有效
*   将变量限定在函数内部使用 local 命令

6. 函数的参数
--------

**用法**

```
函数名称 参数1 参数2 参数3...

```

**表示方法**

```
$1 $2 $3 ......${10} ${11}......

```

### 6.1 传参计算两个数的和

![](https://img-blog.csdnimg.cn/cb2b1ec10dde48d69d0ce034bc1e2a92.png)

### 6.2 调用函数删除文件

![](https://img-blog.csdnimg.cn/3e5586dc879d452982135eab1ca581d6.png)

6.3 用 return 返回值

```
#!/bin/bash
file=/home/error.txt
test(){
#判断文件是否存在，是返回80，否返回40
if [ -f $file ]
then
 return 80
else
 return 40
fi
}
test
```

7. 递归函数
-------

**调用自己本身的函数**

### 7.1 递归遍历目录

```
#!/bin/bash
#列出目录文件列表，目录用颜色表示(蓝色)，文件显示层次关系
list(){
for i in $1/*
do
  if [ -d $i ];
then
  echo -e "\e[34m$i\e[0m"
  echo $i
  list $i " $2"
  else
  echo "$2$i"
  fi
done
}
list $1 $2
```

### 运行结果：

### ![](https://img-blog.csdnimg.cn/55cc668173524a438223a8ff281e5620.png)

### 7.2 计算特定数的阶乘

```
#!/bin/bash
jiecheng(){
a=1
for i in {1..6}
do
let a=$i*$a
done
echo $a
}
jiecheng
```

![](https://img-blog.csdnimg.cn/679a76ddc997407daa3c80827b2acf41.png)

### 7.3 计算随机数的阶乘

```
#!/bin/bash
#计算你输入的数值作为阶乘
 
fun (){
if [ $1 -eq 1 ];
then
  echo 1
else
    local tp=$[$1 - 1]
    local res=$(fun $tp)
    echo $[$1 * $res]
fi
}
read -p "请输入：" num
res=$(fun $num)
echo $res
```

![](https://img-blog.csdnimg.cn/25d41a8c4de243ad9c8d0cd5730f60ef.png)

三. Shell 数组
===========

1. 定义数组
-------

**可以在单行中使用数值列表来定义一个数组**

```
array_var=(test1 test2 test3 test4)
#这些值将会存储在以0为起始索引的连续位置上
或者
#将数组定义为一组“索引—值”
array_var[0]="test1"
array_var[1]="test2"
array_var[2]="test3"
array_var[3]="test4"
```

**精确的给每一个下标索引定义一个值加入数组，索引数字可以不连续**

```
num=([0]=55 [1]=66 [2]=77 [4]=88)
数组名=([0]=value [1]=value [2]=value. . .)
```

**先把要加入数组的元素全部先赋值给一个变量，然后引用这个变量加入到数组**

```
list="11 12 13 14"
num=($list)
```

2. 获取数组长度
---------

**${#arr} 显示字符串长度**

![](https://img-blog.csdnimg.cn/531d3c2cc61d4433ae9c6c235e6098de.png)

 **以列表形式打印出数组中的所有值**  
在数组中，@和 * 的效果一样

![](https://img-blog.csdnimg.cn/50b620b6123244bcbf7aae5ba85e2884.png)

**数组元素的遍历**

![](https://img-blog.csdnimg.cn/da14d518525947acb79a7d44eabe9427.png)

3. 元素切片
-------

```
[root@xlj1 ~]# arrr=(10 20 30 40 50)
[root@xlj1 ~]# echo ${arr[*]}
10 20 30 40 50
[root@xlj1 ~]# echo ${arr[*]:2:3}       #提取出第2个数后面的3个值
30 40 50
[root@xlj1 ~]# echo ${arr[*]:1:3}       #提取出第1个数后面的3个值
20 30 40
[root@xlj1 ~]# echo ${arr[*]:0:4}       #提取出第0个数后面的4个值
10 20 30 40
```

4. 元素替换
-------

```
[root@xlj1 ~]# arr=(1 3 5 7 9)
[root@xlj1 ~]# echo ${arr[*]}
1 3 5 7 9
[root@xlj1 ~]# echo ${arr[*]/3/88}     #3指的是查找数组里面的字符，88指的是需要替换的字符
1 88 5 7 9
[root@xlj1 ~]# echo ${arr[*]/9/100}
1 3 5 7 100
```

5. 元素删除
-------

```
[root@xlj1 ~]# arr=(2 4 6 8 10)
[root@xlj1 ~]# echo ${arr[*]}
2 4 6 8 10
[root@xlj1 ~]# unset arr[2]     #删除下标为2的值，即索引为2的值
[root@xlj1 ~]# echo ${arr[*]}
2 4 8 10
[root@xlj1 ~]# unset arr[4]
[root@xlj1 ~]# echo ${arr[*]}
2 4 8
```

6. 冒泡排序
-------

### 6.1 数组排序算法

类似气泡上涌的动作，会将数据在数组中从小到大或者从大到小不断的向前移动

### 6.2 基本思想

冒泡排序的基本思想是对比相邻的两个元素值，如果满足条件就交换元素值，把较小的元素移动到数组前面，把大的元素移动到数组后面 (也就是交换两个元素的位置)，这样较小的元素就像气泡一样从底部上升到顶部

### 6.3 算法思路

冒泡算法由双层循环实现，其中外部循环用于控制排序轮数，一般为要排序的数组长度减 1 次，因为最后一次循环只剩下一个数组元素，不需要对比，同时数组已经完成排序了。而内部循环主要用于对比数组中每个相邻元素的大小，以确定是否交换位置，对比和交换次数随排序轮数而减少

```
score=(77 13 91 56 88)
 
两两对比，第1个和第2个比，小的值到前面，大的值到后面。
以此类推。第2个和第3个比，第3个和第4个比，第4个和第5个比
 
------------第一轮------------
77 13 91 56 88 第一次对比 数组长度-1 第一轮比较往后值， 最大值为91 
13 77 91 56 88 第二次对比 
13 77 91 56 88 第三次对比 
13 77 56 91 88 第四次对比 
13 77 56 88 91
------------第二轮------------
13 77 56 88 91 第一次对比 数组长度-1第二轮比较往后，第二大的数字88 
13 77 56 88 91 第二次对比 
13 56 77 88 91 第三次对比 
13 56 77 88 91
------------第三轮-----------
13 56 77 88 91 第一次对比 数组长度-1第三轮比较往后，第三大的数字77 
13 56 77 88 91 第二次对比 
13 56 77 88 91
------------第四轮-----------
13 56 77 88 91 第一次对比 数组长度-1第四轮比较往后，第四大的数字56 
13 56 77 88 91
```

列：

```
#!/bin/bash
array=(98 76 24 100 35 3)
echo "old_array:${array[*]}"
lt=${#array[*]}
#定义比较轮数，比较轮数为数组长度-1，从1开始
for ((i=1;i<$lt;i++))
do
  #确定比较元素的位置，比较相邻两个元素，较大的数往后放，比较次数随比较轮数而
减少
  for ((j=0;j<$lt-i;j++))
  do
    #定义第一个元素的值
    first=${array[$j]}
    #定义第二个元素的值
    k=$[$j+1]
    second=${array[$k]}
    #如果第一个元素比第二个元素大，就互换
    if [ $first -gt $second ];then
    #把第一个元素的值保存到临时变量中
    temp=$first
    #把第二个元素值赋给第一个元素
     array[$j]=$second
    #把临时变量赋给第二个元素
     array[$k]=$temp
    fi
    done
done
echo "new_array:${array[@]}"
```

![](https://img-blog.csdnimg.cn/35528f9847424467a051fe96a50906b6.png)